const { createClient } = require('@supabase/supabase-js');

// Supabase connection - using SERVICE ROLE KEY to bypass RLS
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || 'http://127.0.0.1:54321';
const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU';

const supabase = createClient(supabaseUrl, supabaseServiceKey);

// Russian names data
const firstNames = [
  '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä', '–î–º–∏—Ç—Ä–∏–π', '–ú–∞–∫—Å–∏–º', '–°–µ—Ä–≥–µ–π', '–ê–Ω–¥—Ä–µ–π', '–ê–ª–µ–∫—Å–µ–π', '–ê—Ä—Ç—ë–º', '–ò–ª—å—è', '–ö–∏—Ä–∏–ª–ª', '–ú–∏—Ö–∞–∏–ª',
  '–ò–≤–∞–Ω', '–†–æ–º–∞–Ω', '–ï–≥–æ—Ä', '–ê—Ä—Å–µ–Ω–∏–π', '–ù–∏–∫–∏—Ç–∞', '–ú–∞—Ç–≤–µ–π', '–î–∞–Ω–∏–∏–ª', '–í–ª–∞–¥–∏–º–∏—Ä', '–¢–∏–º–æ—Ñ–µ–π', '–ì–ª–µ–±',
  '–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–Ω', '–°—Ç–µ–ø–∞–Ω', '–í–ª–∞–¥–∏—Å–ª–∞–≤', '–ü–∞–≤–µ–ª', '–ù–∏–∫–æ–ª–∞–π', '–î–µ–Ω–∏—Å', '–ï–≤–≥–µ–Ω–∏–π', '–û–ª–µ–≥', '–í–∏–∫—Ç–æ—Ä', '–ê–Ω—Ç–æ–Ω'
];

const lastNames = [
  '–ò–≤–∞–Ω–æ–≤', '–°–º–∏—Ä–Ω–æ–≤', '–ö—É–∑–Ω–µ—Ü–æ–≤', '–ü–æ–ø–æ–≤', '–í–∞—Å–∏–ª—å–µ–≤', '–ü–µ—Ç—Ä–æ–≤', '–°–æ–∫–æ–ª–æ–≤', '–ú–∏—Ö–∞–π–ª–æ–≤', '–ù–æ–≤–∏–∫–æ–≤', '–§—ë–¥–æ—Ä–æ–≤',
  '–ú–æ—Ä–æ–∑–æ–≤', '–í–æ–ª–∫–æ–≤', '–ê–ª–µ–∫—Å–µ–µ–≤', '–õ–µ–±–µ–¥–µ–≤', '–°–µ–º—ë–Ω–æ–≤', '–ï–≥–æ—Ä–æ–≤', '–ü–∞–≤–ª–æ–≤', '–ö–æ–∑–ª–æ–≤', '–°—Ç–µ–ø–∞–Ω–æ–≤', '–ù–∏–∫–æ–ª–∞–µ–≤',
  '–û—Ä–ª–æ–≤', '–ê–Ω–¥—Ä–µ–µ–≤', '–ú–∞–∫–∞—Ä–æ–≤', '–ù–∏–∫–∏—Ç–∏–Ω', '–ó–∞—Ö–∞—Ä–æ–≤', '–ó–∞–π—Ü–µ–≤', '–°–æ–ª–æ–≤—å—ë–≤', '–ë–æ—Ä–∏—Å–æ–≤', '–Ø–∫–æ–≤–ª–µ–≤', '–ì—Ä–∏–≥–æ—Ä—å–µ–≤'
];

const middleNames = [
  '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á', '–î–º–∏—Ç—Ä–∏–µ–≤–∏—á', '–ú–∞–∫—Å–∏–º–æ–≤–∏—á', '–°–µ—Ä–≥–µ–µ–≤–∏—á', '–ê–Ω–¥—Ä–µ–µ–≤–∏—á', '–ê–ª–µ–∫—Å–µ–µ–≤–∏—á', '–ê—Ä—Ç—ë–º–æ–≤–∏—á', '–ò–ª—å–∏—á', '–ö–∏—Ä–∏–ª–ª–æ–≤–∏—á', '–ú–∏—Ö–∞–π–ª–æ–≤–∏—á',
  '–ò–≤–∞–Ω–æ–≤–∏—á', '–†–æ–º–∞–Ω–æ–≤–∏—á', '–ï–≥–æ—Ä–æ–≤–∏—á', '–ê—Ä—Å–µ–Ω—å–µ–≤–∏—á', '–ù–∏–∫–∏—Ç–∏—á', '–ú–∞—Ç–≤–µ–µ–≤–∏—á', '–î–∞–Ω–∏–∏–ª–æ–≤–∏—á', '–í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á', '–¢–∏–º–æ—Ñ–µ–µ–≤–∏—á', '–ì–ª–µ–±–æ–≤–∏—á'
];

const ranks = [
  '–†—è–¥–æ–≤–æ–π', '–ï—Ñ—Ä–µ–π—Ç–æ—Ä', '–ú–ª–∞–¥—à–∏–π —Å–µ—Ä–∂–∞–Ω—Ç', '–°–µ—Ä–∂–∞–Ω—Ç', '–°—Ç–∞—Ä—à–∏–π —Å–µ—Ä–∂–∞–Ω—Ç',
  '–°—Ç–∞—Ä—à–∏–Ω–∞', '–ü—Ä–∞–ø–æ—Ä—â–∏–∫', '–ú–ª–∞–¥—à–∏–π –ª–µ–π—Ç–µ–Ω–∞–Ω—Ç', '–õ–µ–π—Ç–µ–Ω–∞–Ω—Ç', '–°—Ç–∞—Ä—à–∏–π –ª–µ–π—Ç–µ–Ω–∞–Ω—Ç',
  '–ö–∞–ø–∏—Ç–∞–Ω', '–ú–∞–π–æ—Ä', '–ü–æ–¥–ø–æ–ª–∫–æ–≤–Ω–∏–∫', '–ü–æ–ª–∫–æ–≤–Ω–∏–∫'
];

const militaryUnits = [
  '1-—è –≥–≤–∞—Ä–¥–µ–π—Å–∫–∞—è —Ç–∞–Ω–∫–æ–≤–∞—è –∞—Ä–º–∏—è',
  '58-—è –æ–±—â–µ–≤–æ–π—Å–∫–æ–≤–∞—è –∞—Ä–º–∏—è',
  '2-—è –≥–≤–∞—Ä–¥–µ–π—Å–∫–∞—è –æ–±—â–µ–≤–æ–π—Å–∫–æ–≤–∞—è –∞—Ä–º–∏—è',
  '41-—è –æ–±—â–µ–≤–æ–π—Å–∫–æ–≤–∞—è –∞—Ä–º–∏—è',
  '8-—è –≥–≤–∞—Ä–¥–µ–π—Å–∫–∞—è –æ–±—â–µ–≤–æ–π—Å–∫–æ–≤–∞—è –∞—Ä–º–∏—è',
  '20-—è –≥–≤–∞—Ä–¥–µ–π—Å–∫–∞—è –æ–±—â–µ–≤–æ–π—Å–∫–æ–≤–∞—è –∞—Ä–º–∏—è',
  '–ú–æ—Ä—Å–∫–∞—è –ø–µ—Ö–æ—Ç–∞',
  '–í–î–í',
  '–°–ø–µ—Ü–Ω–∞–∑ –ì–†–£',
  '–†–∞–∑–≤–µ–¥–∫–∞',
  '–ê—Ä—Ç–∏–ª–ª–µ—Ä–∏—è',
  '–ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ –≤–æ–π—Å–∫–∞'
];

const hometowns = [
  '–ö–∞–≤–∞–ª–µ—Ä–æ–≤–æ', '–ú–æ—Å–∫–≤–∞', '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', '–í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫', '–ù–∞—Ö–æ–¥–∫–∞', '–£—Å—Å—É—Ä–∏–π—Å–∫',
  '–•–∞–±–∞—Ä–æ–≤—Å–∫', '–ë–ª–∞–≥–æ–≤–µ—â–µ–Ω—Å–∫', '–ö–æ–º—Å–æ–º–æ–ª—å—Å–∫-–Ω–∞-–ê–º—É—Ä–µ', '–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π',
  '–Æ–∂–Ω–æ-–°–∞—Ö–∞–ª–∏–Ω—Å–∫', '–ú–∞–≥–∞–¥–∞–Ω', '–ê–Ω–∞–¥—ã—Ä—å', '–Ø–∫—É—Ç—Å–∫', '–ß–∏—Ç–∞', '–£–ª–∞–Ω-–£–¥—ç',
  '–ò—Ä–∫—É—Ç—Å–∫', '–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫', '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', '–û–º—Å–∫', '–¢–æ–º—Å–∫', '–ö–µ–º–µ—Ä–æ–≤–æ',
  '–ë–∞—Ä–Ω–∞—É–ª', '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', '–ß–µ–ª—è–±–∏–Ω—Å–∫', '–¢—é–º–µ–Ω—å', '–ö—É—Ä–≥–∞–Ω', '–û—Ä–µ–Ω–±—É—Ä–≥'
];

const serviceTypes = ['mobilized', 'volunteer', 'pmc', 'professional'];

const memorialTexts = [
  '–ì–µ—Ä–æ–π, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–¥–∞–ª —Å–≤–æ—é –∂–∏–∑–Ω—å –∑–∞ –†–æ–¥–∏–Ω—É. –ï–≥–æ –ø–æ–¥–≤–∏–≥ –Ω–∞–≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ –Ω–∞—à–∏—Ö —Å–µ—Ä–¥—Ü–∞—Ö. –û–Ω –±—ã–ª –Ω–∞—Å—Ç–æ—è—â–∏–º –ø–∞—Ç—Ä–∏–æ—Ç–æ–º, –≤–µ—Ä–Ω—ã–º –¥–æ–ª–≥—É –∏ —Å–≤–æ–∏–º —Ç–æ–≤–∞—Ä–∏—â–∞–º. –ú—ã –ø–æ–º–Ω–∏–º, –º—ã –≥–æ—Ä–¥–∏–º—Å—è, –º—ã —á—Ç–∏–º –µ–≥–æ –ø–∞–º—è—Ç—å.',
  '–ù–∞—Å—Ç–æ—è—â–∏–π –∑–∞—â–∏—Ç–Ω–∏–∫ –û—Ç–µ—á–µ—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ä–∞–∑–¥—É–º—ã–≤–∞—è –≤—Å—Ç–∞–ª –Ω–∞ –∑–∞—â–∏—Ç—É —Å–≤–æ–µ–π —Å—Ç—Ä–∞–Ω—ã. –ï–≥–æ –º—É–∂–µ—Å—Ç–≤–æ –∏ –æ—Ç–≤–∞–≥–∞ —Å–ª—É–∂–∞—Ç –ø—Ä–∏–º–µ—Ä–æ–º –¥–ª—è –≤—Å–µ—Ö –Ω–∞—Å. –°–≤–µ—Ç–ª–∞—è –ø–∞–º—è—Ç—å –≥–µ—Ä–æ—é, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–¥–∞–ª —Å–∞–º–æ–µ —Ü–µ–Ω–Ω–æ–µ ‚Äî —Å–≤–æ—é –∂–∏–∑–Ω—å –∑–∞ –Ω–∞—à–µ –º–∏—Ä–Ω–æ–µ –±—É–¥—É—â–µ–µ.',
  '–¢—ã –Ω–∞–≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–Ω–µ—à—å—Å—è –≤ –Ω–∞—à–∏—Ö —Å–µ—Ä–¥—Ü–∞—Ö –∫–∞–∫ —Å–∏–º–≤–æ–ª —á–µ—Å—Ç–∏, –¥–æ–±–ª–µ—Å—Ç–∏ –∏ –≤–µ—Ä–Ω–æ—Å—Ç–∏. –¢–≤–æ–π –≥–µ—Ä–æ–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å ‚Äî —ç—Ç–æ –ø—Ä–∏–º–µ—Ä —Å–∞–º–æ–æ—Ç–≤–µ—Ä–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ª—é–±–≤–∏ –∫ –†–æ–¥–∏–Ω–µ. –ú—ã –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞–º—è—Ç—å –æ —Ç–µ–±–µ –∏ –ø–µ—Ä–µ–¥–∞–¥–∏–º –µ—ë –±—É–¥—É—â–∏–º –ø–æ–∫–æ–ª–µ–Ω–∏—è–º.',
  '–û—Ç–≤–∞–∂–Ω—ã–π –≤–æ–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π –¥–æ –∫–æ–Ω—Ü–∞ –±—ã–ª –≤–µ—Ä–µ–Ω —Å–≤–æ–µ–º—É –¥–æ–ª–≥—É –∏ –ø—Ä–∏—Å—è–≥–µ. –ï–≥–æ –ø–æ–¥–≤–∏–≥ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç –∑–∞–±—ã—Ç. –û–Ω –∑–∞—â–∏—â–∞–ª –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é, –Ω–æ –∏ –Ω–∞—à–∏ –∂–∏–∑–Ω–∏, –Ω–∞—à–µ –±—É–¥—É—â–µ–µ, –Ω–∞—à–∏—Ö –¥–µ—Ç–µ–π. –í–µ—á–Ω–∞—è —Å–ª–∞–≤–∞ –∏ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å.',
  '–¢–≤–æ–π –ø–æ–¥–≤–∏–≥ –Ω–∞–≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏. –¢—ã –æ—Ç–¥–∞–ª –∂–∏–∑–Ω—å, –∑–∞—â–∏—â–∞—è —Ç–µ—Ö, –∫—Ç–æ —Å–ª–∞–±–µ–µ, –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –º–∏—Ä –¥–ª—è —Å–≤–æ–µ–π —Å–µ–º—å–∏ –∏ —Å—Ç—Ä–∞–Ω—ã. –°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–≤–æ—é —Å–ª—É–∂–±—É, –∑–∞ —Ç–≤–æ—ë –º—É–∂–µ—Å—Ç–≤–æ, –∑–∞ –º–∏—Ä–Ω–æ–µ –Ω–µ–±–æ –Ω–∞–¥ –Ω–∞—à–∏–º–∏ –≥–æ–ª–æ–≤–∞–º–∏. –í–µ—á–Ω–∞—è –ø–∞–º—è—Ç—å.',
  '–ü–æ–≥–∏–± –ø—Ä–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤–æ–∏–Ω—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞, –∑–∞—â–∏—â–∞—è –º–∏—Ä –∏ —Å–≤–æ–±–æ–¥—É —Å–≤–æ–µ–π —Å—Ç—Ä–∞–Ω—ã. –ï–≥–æ –≥–µ—Ä–æ–∏–∑–º –∏ —Å–∞–º–æ–æ—Ç–≤–µ—Ä–∂–µ–Ω–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –æ–±—Ä–∞–∑–µ—Ü –¥–ª—è –≤—Å–µ—Ö –ø–æ–∫–æ–ª–µ–Ω–∏–π. –ú—ã –ø–æ–º–Ω–∏–º —Ç–≤–æ–π –ø–æ–¥–≤–∏–≥ –∏ –≥–æ—Ä–¥–∏–º—Å—è —Ç–µ–º, —á—Ç–æ —Ç—ã –±—ã–ª —Å –Ω–∞–º–∏. –°–≤–µ—Ç–ª–∞—è –ø–∞–º—è—Ç—å –≥–µ—Ä–æ—é.',
  '–ì–µ—Ä–æ–π –Ω–∞—à–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Å—Ç—Ä—É—Å–∏–ª –ø–µ—Ä–µ–¥ –ª–∏—Ü–æ–º –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –≤—ã–ø–æ–ª–Ω–∏–ª —Å–≤–æ–π –¥–æ–ª–≥ –¥–æ –∫–æ–Ω—Ü–∞. –ï–≥–æ –∏–º—è –Ω–∞–≤—Å–µ–≥–¥–∞ –≤–ø–∏—Å–∞–Ω–æ –≤ –∏—Å—Ç–æ—Ä–∏—é. –ú—ã –±–ª–∞–≥–æ–¥–∞—Ä–Ω—ã –∑–∞ –µ–≥–æ —Å–ª—É–∂–±—É –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–±—É–¥–µ–º –µ–≥–æ –∂–µ—Ä—Ç–≤—É. –í–µ—á–Ω–∞—è –ø–∞–º—è—Ç—å –∏ —Å–ª–∞–≤–∞.',
  '–¢—ã –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—à—å –¥–ª—è –Ω–∞—Å –ø—Ä–∏–º–µ—Ä–æ–º –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –º—É–∂–µ—Å—Ç–≤–∞, —á–µ—Å—Ç–∏ –∏ –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç–∏. –¢–≤–æ—è —Å–ª—É–∂–±–∞ ‚Äî —ç—Ç–æ –ø–æ–¥–≤–∏–≥, –∫–æ—Ç–æ—Ä—ã–π –º—ã —á—Ç–∏–º –∏ –ø–æ–º–Ω–∏–º. –¢—ã –∑–∞—â–∏—â–∞–ª –Ω–µ —Ç–æ–ª—å–∫–æ –≥—Ä–∞–Ω–∏—Ü—ã, –Ω–æ –∏ –Ω–∞—à–∏ —Å–µ–º—å–∏, –Ω–∞—à –¥–æ–º, –Ω–∞—à—É –†–æ–¥–∏–Ω—É. –°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ, –≥–µ—Ä–æ–π.',
  '–°–≤–µ—Ç–ª–∞—è –ø–∞–º—è—Ç—å –∑–∞—â–∏—Ç–Ω–∏–∫—É –û—Ç–µ—á–µ—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–¥–∞–ª —Å–≤–æ—é –∂–∏–∑–Ω—å –∑–∞ –Ω–∞—Å. –ú—ã —Å–∫–æ—Ä–±–∏–º –æ –ø–æ—Ç–µ—Ä–µ –∏ –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è –≥–æ—Ä–¥–∏–º—Å—è —Ç–∞–∫–∏–º –≥–µ—Ä–æ–µ–º. –¢–≤–æ—ë –∏–º—è –Ω–∞–≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ –Ω–∞—à–∏—Ö —Å–µ—Ä–¥—Ü–∞—Ö –∫–∞–∫ —Å–∏–º–≤–æ–ª –¥–æ–±–ª–µ—Å—Ç–∏ –∏ —á–µ—Å—Ç–∏. –í–µ—á–Ω–∞—è –ø–∞–º—è—Ç—å.',
  '–¢–≤–æ—è —Å–ª—É–∂–±–∞ ‚Äî —ç—Ç–æ –ø—Ä–∏–º–µ—Ä –¥–ª—è –≤—Å–µ—Ö –Ω–∞—Å. –¢—ã –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ –∑–Ω–∞—á–∏—Ç –±—ã—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–º –ø–∞—Ç—Ä–∏–æ—Ç–æ–º –∏ –∑–∞—â–∏—Ç–Ω–∏–∫–æ–º. –¢–≤–æ–π –ø–æ–¥–≤–∏–≥ –±—É–¥–µ—Ç –∂–∏—Ç—å –≤ –≤–µ–∫–∞—Ö, –∞ –ø–∞–º—è—Ç—å –æ —Ç–µ–±–µ –º—ã –ø–µ—Ä–µ–¥–∞–¥–∏–º –Ω–∞—à–∏–º –¥–µ—Ç—è–º –∏ –≤–Ω—É–∫–∞–º. –í–µ—á–Ω–∞—è —Å–ª–∞–≤–∞ –∏ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –≥–µ—Ä–æ—é.'
];

// Generate random date between two dates
function randomDate(start, end) {
  return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
}

// Format date to YYYY-MM-DD
function formatDate(date) {
  return date.toISOString().split('T')[0];
}

// Generate random hero
function generateHero(index) {
  const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];
  const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
  const middleName = middleNames[Math.floor(Math.random() * middleNames.length)];

  const birthYear = 1985 + Math.floor(Math.random() * 15); // 1985-1999
  const birthDate = randomDate(new Date(birthYear, 0, 1), new Date(birthYear, 11, 31));

  const deathYear = 2022 + Math.floor(Math.random() * 3); // 2022-2024
  const deathDate = randomDate(new Date(deathYear, 0, 1), new Date(deathYear, 11, 31));

  const serviceStartYear = birthYear + 18 + Math.floor(Math.random() * 5);
  const serviceStartDate = randomDate(new Date(serviceStartYear, 0, 1), new Date(serviceStartYear, 11, 31));

  return {
    first_name: firstName,
    last_name: lastName,
    middle_name: middleName,
    birth_date: formatDate(birthDate),
    death_date: formatDate(deathDate),
    rank: ranks[Math.floor(Math.random() * ranks.length)],
    military_unit: militaryUnits[Math.floor(Math.random() * militaryUnits.length)],
    hometown: hometowns[Math.floor(Math.random() * hometowns.length)],
    burial_location: hometowns[Math.floor(Math.random() * hometowns.length)],
    service_type: serviceTypes[Math.floor(Math.random() * serviceTypes.length)],
    service_start_date: formatDate(serviceStartDate),
    memorial_text: memorialTexts[Math.floor(Math.random() * memorialTexts.length)],
    biography_md: `**${firstName} ${middleName} ${lastName}** —Ä–æ–¥–∏–ª—Å—è ${formatDate(birthDate)} –≤ –≥–æ—Ä–æ–¥–µ ${hometowns[Math.floor(Math.random() * hometowns.length)]}.\n\n–° –¥–µ—Ç—Å—Ç–≤–∞ –ø—Ä–æ—è–≤–ª—è–ª –∏–Ω—Ç–µ—Ä–µ—Å –∫ –≤–æ–µ–Ω–Ω–æ–º—É –¥–µ–ª—É. –ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —à–∫–æ–ª—ã –ø–æ—Å—Ç—É–ø–∏–ª –Ω–∞ –≤–æ–µ–Ω–Ω—É—é —Å–ª—É–∂–±—É. –°–ª—É–∂–∏–ª —á–µ—Å—Ç–Ω–æ –∏ –¥–æ—Å—Ç–æ–π–Ω–æ, –±—ã–ª –ø—Ä–∏–º–µ—Ä–æ–º –¥–ª—è —Ç–æ–≤–∞—Ä–∏—â–µ–π.\n\n–ü–æ–≥–∏–± –ø—Ä–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤–æ–∏–Ω—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞ ${formatDate(deathDate)}. –ü–æ—Å–º–µ—Ä—Ç–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∫ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä–∞–¥–µ.\n\n–û—Å—Ç–∞–≤–∏–ª –ø–æ—Å–ª–µ —Å–µ–±—è —Å–≤–µ—Ç–ª—É—é –ø–∞–º—è—Ç—å –≤ —Å–µ—Ä–¥—Ü–∞—Ö —Ä–æ–¥–Ω—ã—Ö, –¥—Ä—É–∑–µ–π –∏ —Å–æ—Å–ª—É–∂–∏–≤—Ü–µ–≤.`,
    status: 'approved',
    is_demo: true,
    is_deleted: false,
    owner_id: '00000000-0000-0000-0000-000000000001' // Demo user ID
  };
}

async function main() {
  console.log('üöÄ Starting demo cards generation...\n');

  // Check if demo user exists
  const { data: demoUser, error: userError } = await supabase
    .from('users')
    .select('id')
    .eq('id', '00000000-0000-0000-0000-000000000001')
    .single();

  if (userError || !demoUser) {
    console.log('‚ö†Ô∏è  Demo user not found. Creating...');
    const { error: createUserError } = await supabase
      .from('users')
      .insert({
        id: '00000000-0000-0000-0000-000000000001',
        full_name: 'Demo User',
        phone: '+79000000000',
        role: 'user',
        is_deleted: false
      });

    if (createUserError) {
      console.error('‚ùå Failed to create demo user:', createUserError);
      return;
    }
    console.log('‚úÖ Demo user created\n');
  } else {
    console.log('‚úÖ Demo user exists\n');
  }

  // Generate 80 demo heroes
  const heroes = [];
  for (let i = 0; i < 80; i++) {
    heroes.push(generateHero(i));
  }

  console.log(`üìù Generated ${heroes.length} demo heroes\n`);

  // Insert in batches of 10
  const batchSize = 10;
  let successCount = 0;
  let errorCount = 0;

  for (let i = 0; i < heroes.length; i += batchSize) {
    const batch = heroes.slice(i, i + batchSize);
    const { data, error } = await supabase
      .from('fallen')
      .insert(batch)
      .select();

    if (error) {
      console.error(`‚ùå Error inserting batch ${i / batchSize + 1}:`, error.message);
      errorCount += batch.length;
    } else {
      successCount += batch.length;
      console.log(`‚úÖ Inserted batch ${i / batchSize + 1} (${batch.length} heroes)`);
    }
  }

  console.log(`\nüéâ Done!`);
  console.log(`‚úÖ Successfully inserted: ${successCount} heroes`);
  if (errorCount > 0) {
    console.log(`‚ùå Failed to insert: ${errorCount} heroes`);
  }
}

main().catch(console.error);
