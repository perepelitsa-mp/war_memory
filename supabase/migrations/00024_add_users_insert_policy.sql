-- =====================================================
-- Книга Памяти Кавалерово - Добавление политики INSERT для users
-- =====================================================
-- Миграция: 00024_add_users_insert_policy.sql
-- Описание: Разрешаем новым пользователям создавать свою запись в таблице users
-- Дата: 2025-01-23

-- Создание: пользователь может создать запись только для себя
CREATE POLICY "Users can insert own profile"
  ON public.users FOR INSERT
  WITH CHECK (
    id = auth.uid()
  );

-- Комментарий
COMMENT ON POLICY "Users can insert own profile" ON public.users IS
  'Позволяет новым пользователям создать свою запись в таблице users при регистрации';
